[{"title":"My first Post","url":"/2022/05/28/My-first-Post/","content":"<p>And here we start a new journey.</p>\n<p>pic bed test: </p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220522223044162.png\" alt=\"image-20220522223044162\"></p>\n","tags":["Hexo"]},{"title":"lenet5","url":"/2022/08/20/lenet5/","content":"<h1 id=\"lenet5ç®€æ˜“å®ç°\"><a href=\"#lenet5ç®€æ˜“å®ç°\" class=\"headerlink\" title=\"lenet5ç®€æ˜“å®ç°\"></a>lenet5ç®€æ˜“å®ç°</h1><p>æœ±å­åº·(<a href=\"mailto:&#x73;&#112;&#122;&#101;&#110;&#111;&#64;&#49;&#54;&#51;&#46;&#x63;&#111;&#109;\">&#x73;&#112;&#122;&#101;&#110;&#111;&#64;&#49;&#54;&#51;&#46;&#x63;&#111;&#109;</a>)</p>\n<p>äºŒé›¶äºŒäºŒå¹´ä¸ƒæœˆåå…­æ—¥</p>\n<p>æ‘˜è¦ï¼šæœ¬æŠ¥å‘Šä¸º2022çº§ERCESIæ–°ç¡•å£«ç ”ç©¶ç”ŸåŸ¹è®­ç¬¬ä¸€é˜¶æ®µLAB1æŠ¥å‘Šã€‚<a href=\"https://github.com/spzeno/lenet5.git\">GitHub Repo</a></p>\n<h3 id=\"å®éªŒå†…å®¹æ¦‚è¿°\"><a href=\"#å®éªŒå†…å®¹æ¦‚è¿°\" class=\"headerlink\" title=\"å®éªŒå†…å®¹æ¦‚è¿°\"></a>å®éªŒå†…å®¹æ¦‚è¿°</h3><p>çº¯cå®ç°lenet5ï¼Œä¸å¾—è°ƒç”¨ç¬¬ä¸‰æ–¹åº“ï¼Œæƒé‡æ•°æ®å·²ç»ç»™å‡ºã€‚</p>\n<h4 id=\"lenet5ç»“æ„\"><a href=\"#lenet5ç»“æ„\" class=\"headerlink\" title=\"lenet5ç»“æ„\"></a>lenet5ç»“æ„</h4><p>LeNet æ˜¯å‡ ç§ç¥ç»ç½‘ç»œçš„ç»Ÿç§°ï¼Œå®ƒä»¬æ˜¯ Yann LeCun ç­‰äººåœ¨ 1990 å¹´ä»£å¼€å‘çš„ã€‚ä¸€èˆ¬è®¤ä¸ºï¼Œå®ƒä»¬æ˜¯æœ€æ—©çš„<strong>å·ç§¯ç¥ç»ç½‘ç»œ</strong>ï¼ˆConvolutional Neural Networks, CNNsï¼‰ã€‚æ¨¡å‹æ¥æ”¶ç°åº¦å›¾åƒï¼Œå¹¶è¾“å‡ºå…¶ä¸­åŒ…å«çš„æ‰‹å†™æ•°å­—ã€‚LeNet åŒ…å«äº†ä»¥ä¸‹ä¸‰ä¸ªæ¨¡å‹ï¼š</p>\n<ul>\n<li>LeNet-1ï¼š5 å±‚æ¨¡å‹ï¼Œä¸€ä¸ªç®€å•çš„ CNNã€‚</li>\n<li>LeNet-4ï¼š6 å±‚æ¨¡å‹ï¼Œæ˜¯ LeNet-1 çš„æ”¹è¿›ç‰ˆæœ¬ã€‚</li>\n<li>LeNet-5ï¼š7 å±‚æ¨¡å‹ï¼Œæœ€è‘—åçš„ç‰ˆæœ¬ã€‚</li>\n</ul>\n<p>æœ¬æ¬¡å®ç°çš„lenet5æ¨¡å‹çš„ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220716150406656.png\" alt=\"image-20220716150406656\"></p>\n<h4 id=\"å‚æ•°åˆ†æ\"><a href=\"#å‚æ•°åˆ†æ\" class=\"headerlink\" title=\"å‚æ•°åˆ†æ\"></a>å‚æ•°åˆ†æ</h4><table>\n<thead>\n<tr>\n<th>Layer</th>\n<th>Output Size</th>\n<th>Weight Size</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Input</td>\n<td>1 x 28 x 28</td>\n<td></td>\n</tr>\n<tr>\n<td>Conv(C_out&#x3D;6,K&#x3D;5,P&#x3D;0,S&#x3D;1)</td>\n<td>6 x 24 x 24</td>\n<td>6 x 1 x 5 x 5</td>\n</tr>\n<tr>\n<td>ReLU</td>\n<td>6 x 24 x 24</td>\n<td></td>\n</tr>\n<tr>\n<td>MaxPool(K&#x3D;2,S&#x3D;2)</td>\n<td>6 x 12 x 12</td>\n<td></td>\n</tr>\n<tr>\n<td>Conv(C_out&#x3D;16,K&#x3D;5,P&#x3D;0,S&#x3D;1)</td>\n<td>16 x 8 x 8</td>\n<td>16 x 6 x 5 x 5</td>\n</tr>\n<tr>\n<td>ReLU</td>\n<td>16 x 8 x 8</td>\n<td></td>\n</tr>\n<tr>\n<td>MaxPool(K&#x3D;2,S&#x3D;2)</td>\n<td>16 x 4 x 4</td>\n<td></td>\n</tr>\n<tr>\n<td>Flatten</td>\n<td>256</td>\n<td></td>\n</tr>\n<tr>\n<td>Linear(256-&gt;128)</td>\n<td>128</td>\n<td>256*128</td>\n</tr>\n<tr>\n<td>ReLU</td>\n<td>128</td>\n<td></td>\n</tr>\n<tr>\n<td>Linear(128-&gt;84)</td>\n<td>84</td>\n<td>128*84</td>\n</tr>\n<tr>\n<td>ReLU</td>\n<td>84</td>\n<td></td>\n</tr>\n<tr>\n<td>Linear(84-&gt;10)</td>\n<td>10</td>\n<td>84*10</td>\n</tr>\n<tr>\n<td>ReLU</td>\n<td>10</td>\n<td></td>\n</tr>\n</tbody></table>\n<h3 id=\"ç®—æ³•åŠæµç¨‹\"><a href=\"#ç®—æ³•åŠæµç¨‹\" class=\"headerlink\" title=\"ç®—æ³•åŠæµç¨‹\"></a>ç®—æ³•åŠæµç¨‹</h3><h4 id=\"å¾…æµ‹è¯•é›†åˆå¤„ç†\"><a href=\"#å¾…æµ‹è¯•é›†åˆå¤„ç†\" class=\"headerlink\" title=\"å¾…æµ‹è¯•é›†åˆå¤„ç†\"></a>å¾…æµ‹è¯•é›†åˆå¤„ç†</h4><p>ç”±äºpngå›¾ç‰‡é‡‡ç”¨äº†ä»LZ77æ´¾ç”Ÿçš„æ— æŸæ•°æ®å‹ç¼©ç®—æ³•ä¸”æ¯ä¸ªpixelç”±RGBå’ŒÎ±é€šé“å€¼è¡¨ç¤ºï¼Œçº¯cè¯­è¨€è¯»å–pngå›¾ç‰‡å¹¶è½¬æ¢ä¸ºä½å›¾éš¾åº¦è¾ƒå¤§ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨å¦‚ä¸‹Pythonè„šæœ¬å¯¹20å¼ pngå›¾ç‰‡è¿›è¡Œé¢„å¤„ç†ï¼Œå¾—åˆ°mnist ubyteæ ¼å¼ï¼ˆä¸åŒ…å«å¤´éƒ¨ï¼‰çš„image-ubyteæ–‡ä»¶å’Œlabel-ubyteæ–‡ä»¶ã€‚</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">from</span> PIL <span class=\"keyword\">import</span> Image</span><br><span class=\"line\"><span class=\"keyword\">from</span> array <span class=\"keyword\">import</span> *</span><br><span class=\"line\"></span><br><span class=\"line\">dirname = <span class=\"string\">&#x27;./image&#x27;</span></span><br><span class=\"line\">data_image = array(<span class=\"string\">&#x27;B&#x27;</span>)</span><br><span class=\"line\">data_label = array(<span class=\"string\">&#x27;B&#x27;</span>)</span><br><span class=\"line\">FileList = []</span><br><span class=\"line\"><span class=\"keyword\">for</span> filename <span class=\"keyword\">in</span> os.listdir(dirname):</span><br><span class=\"line\">  <span class=\"keyword\">if</span> filename.endswith(<span class=\"string\">&quot;.png&quot;</span>):</span><br><span class=\"line\">    FileList.append(os.path.join(dirname,filename))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> filename <span class=\"keyword\">in</span> FileList:</span><br><span class=\"line\">  label = <span class=\"built_in\">int</span>(filename.split(<span class=\"string\">&#x27;/&#x27;</span>)[<span class=\"number\">2</span>][<span class=\"number\">0</span>])</span><br><span class=\"line\"></span><br><span class=\"line\">  Im = Image.<span class=\"built_in\">open</span>(filename)</span><br><span class=\"line\"></span><br><span class=\"line\">  pixel = Im.load()</span><br><span class=\"line\">  width, height = Im.size</span><br><span class=\"line\">  <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,width):</span><br><span class=\"line\">    <span class=\"keyword\">for</span> y <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">0</span>,height):</span><br><span class=\"line\">      data_image.append(pixel[y,x])</span><br><span class=\"line\">  data_label.append(label) </span><br><span class=\"line\"></span><br><span class=\"line\">output_file = <span class=\"built_in\">open</span>(<span class=\"string\">&#x27;image-ubyte&#x27;</span>, <span class=\"string\">&#x27;wb&#x27;</span>)</span><br><span class=\"line\">data_image.tofile(output_file)</span><br><span class=\"line\">output_file = <span class=\"built_in\">open</span>(<span class=\"string\">&#x27;label-ubyte&#x27;</span>, <span class=\"string\">&#x27;wb&#x27;</span>)</span><br><span class=\"line\">data_label.tofile(output_file)</span><br><span class=\"line\">output_file.close()</span><br></pre></td></tr></table></figure>\n\n<p>å°†<code>COUNT_TEST</code>ä¸ªubyteæ ¼å¼çš„28x28 8bitç°åº¦å›¾æ•°æ®å­˜å‚¨åœ¨å…¨å±€å˜é‡<code>uint8 imageSet[COUNT_TEST][28][28];</code>ï¼Œç›¸åº”çš„æ ‡ç­¾å­˜å‚¨åœ¨<code>uint8 labelSet[COUNT_TEST];</code>ï¼Œæ¶‰åŠåˆ°çš„è¯»å–å‡½æ•°å¦‚ä¸‹</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"type\">int</span> <span class=\"title function_\">read_data</span><span class=\"params\">(<span class=\"type\">const</span> <span class=\"type\">char</span> data_file[], <span class=\"type\">const</span> <span class=\"type\">char</span> label_file[])</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tFILE* fp_image = fopen(data_file, <span class=\"string\">&quot;rb&quot;</span>);</span><br><span class=\"line\">\tFILE* fp_label = fopen(label_file, <span class=\"string\">&quot;rb&quot;</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!fp_image || !fp_label) <span class=\"keyword\">return</span> <span class=\"number\">1</span>;</span><br><span class=\"line\">\tfseek(fp_image, <span class=\"number\">0</span>, SEEK_SET);   <span class=\"comment\">//å·²ç»å»æ‰å¤´éƒ¨æ•°æ®</span></span><br><span class=\"line\">\tfseek(fp_label, <span class=\"number\">0</span>, SEEK_SET);</span><br><span class=\"line\">\tfread(imageSet, <span class=\"keyword\">sizeof</span>(*imageSet) * COUNT_TEST, <span class=\"number\">1</span>, fp_image);</span><br><span class=\"line\">\tfread(labelSet, COUNT_TEST, <span class=\"number\">1</span>, fp_label);</span><br><span class=\"line\">\tfclose(fp_image);</span><br><span class=\"line\">\tfclose(fp_label);</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"é¢„å¤„ç†æƒé‡æ•°æ®å¹¶è¯»å–\"><a href=\"#é¢„å¤„ç†æƒé‡æ•°æ®å¹¶è¯»å–\" class=\"headerlink\" title=\"é¢„å¤„ç†æƒé‡æ•°æ®å¹¶è¯»å–\"></a>é¢„å¤„ç†æƒé‡æ•°æ®å¹¶è¯»å–</h4><p>c1ã€c2ã€d1ã€d2ã€d3æƒé‡æ•°æ®çš„æœ€åä¸€åˆ—ä¸ºbiasæ•°æ®ï¼Œä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬å°†æœ€åä¸€åˆ—æå–å‡ºæ¥ï¼Œé¢„å¤„ç†æƒé‡æ•°æ®å¾—åˆ°</p>\n<ul>\n<li>c1å±‚å¯¹åº”çš„å·ç§¯<code>w0_1</code>å’Œ<code>bias0_1</code></li>\n<li>c2å±‚å¯¹åº”çš„å·ç§¯<code>w2_3</code>å’Œ<code>bias2_3</code></li>\n<li>d1å±‚å¯¹åº”çš„å·ç§¯<code>w4_5</code>å’Œ<code>bias4_5</code></li>\n<li>d2å±‚å¯¹åº”çš„å·ç§¯<code>w5_6</code>å’Œ<code>bias5_6</code></li>\n<li>d3å±‚å¯¹åº”çš„å·ç§¯<code>w6_7</code>å’Œ<code>bias6_7</code></li>\n</ul>\n<p>é¢„å¤„ç†å¾—åˆ°çš„æ•°æ®åœ¨æºä»£ç æ–‡ä»¶å¤¹ä¸‹ã€‚</p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220718134409955.png\" alt=\"image-20220718134409955\"></p>\n<p>ä½¿ç”¨å…¨å±€å˜é‡å­˜å‚¨æƒé‡æ•°æ®ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//weights</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> INPUT\t\t\t1</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> LAYER1\t\t\t6</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> LAYER2\t\t\t6</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> LAYER3\t\t\t16</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> LAYER4\t\t\t16</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> LAYER5\t\t\t128</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> LAYER6\t\t\t84</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> LAYER7          10</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> LENGTH_KERNEL_0_1\t5</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> LENGTH_KERNEL_2_3\t5</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> LENGTH_KERNEL_4_5\t4</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> LENGTH_KERNEL_5_6\t1</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> LENGTH_KERNEL_6_7\t1</span></span><br><span class=\"line\"><span class=\"type\">double</span> weight0_1[INPUT][LAYER1][LENGTH_KERNEL_0_1][LENGTH_KERNEL_0_1];</span><br><span class=\"line\"><span class=\"type\">double</span> weight2_3[LAYER2][LAYER3][LENGTH_KERNEL_2_3][LENGTH_KERNEL_2_3];</span><br><span class=\"line\"><span class=\"type\">double</span> weight4_5[LAYER4][LAYER5][LENGTH_KERNEL_4_5][LENGTH_KERNEL_4_5];</span><br><span class=\"line\"><span class=\"type\">double</span> weight5_6[LAYER5][LAYER6][LENGTH_KERNEL_5_6][LENGTH_KERNEL_5_6];</span><br><span class=\"line\"><span class=\"type\">double</span> weight6_7[LAYER6][LAYER7][LENGTH_KERNEL_6_7][LENGTH_KERNEL_6_7];</span><br><span class=\"line\"><span class=\"type\">double</span> bias0_1[LAYER1];</span><br><span class=\"line\"><span class=\"type\">double</span> bias2_3[LAYER3];</span><br><span class=\"line\"><span class=\"type\">double</span> bias4_5[LAYER5];</span><br><span class=\"line\"><span class=\"type\">double</span> bias5_6[LAYER6];</span><br><span class=\"line\"><span class=\"type\">double</span> bias6_7[LAYER7];</span><br></pre></td></tr></table></figure>\n\n<p>æ¥ä¸‹æ¥ä»é¢„å¤„ç†å¾—åˆ°çš„æ•°æ®æ–‡ä»¶ä¸­è¯»å–æ•°æ®åˆ°ä¸Šè¿°ä¿å­˜æƒé‡æ•°æ®çš„å…¨å±€å˜é‡ä¸­ï¼Œä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œä½¿ç”¨äº†å®å‡½æ•°å¦‚ä¸‹ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œå½“éœ€è¦è¯»å–<code>c1</code>å±‚çš„æƒé‡æ•°æ®æ—¶ï¼Œåªéœ€<code>readWeightMat(&quot;w0_1&quot;,LENGTH_KERNEL_0_1,INPUT,weight0_1); readBias(&quot;bias0_1&quot;,bias0_1);</code>å³å¯ã€‚</p>\n<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºæä¾›çš„æƒé‡æ•°æ®çš„ç»„ç»‡å½¢å¼å’Œä¸Šè¿°å®šä¹‰çš„ä¿å­˜æƒé‡æ•°æ®çš„å…¨å±€å˜é‡çš„ç»„ç»‡å½¢å¼çš„å·®å¼‚ï¼Œ<strong>æˆ‘ä»¬éœ€è¦æ ¹æ®å½“å‰è¯»å–ç´¢å¼•<code>idx</code>ç¡®å®šå½“å‰è¯»å–åˆ°çš„æƒé‡å€¼çš„å­˜å‚¨ä½ç½®</strong>ï¼Œä¹Ÿå³å››ç»´æ•°ç»„wçš„4ä¸ªä¸‹æ ‡çš„è¡¨è¾¾å¼ã€‚</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> readWeightMat(FILE_MAT, KERNELSIZE, frontLayerSize,w)\t\\</span></span><br><span class=\"line\"><span class=\"meta\">&#123;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\tFILE* f = fopen(FILE_MAT, <span class=\"string\">&quot;r&quot;</span>);\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\t<span class=\"keyword\">if</span> (!f) return 1;\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\tdouble tmp = 0;\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\tint idx = 0;\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\twhile (fscanf(f, <span class=\"string\">&quot;%lf&quot;</span>, &amp;tmp) != EOF) &#123;\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\t\tw[idx / KERNELSIZE / KERNELSIZE % frontLayerSize][idx / KERNELSIZE / KERNELSIZE /  frontLayerSize][idx / KERNELSIZE % KERNELSIZE][idx % KERNELSIZE] = tmp; \\</span></span><br><span class=\"line\"><span class=\"meta\">\t\tidx++;\t\t\t\t\t\t\t\t\t\t\t\t    \\</span></span><br><span class=\"line\"><span class=\"meta\">\t&#125;\t\t\t\t\t\t\t\t\t\t\t\t\t\t    \\</span></span><br><span class=\"line\"><span class=\"meta\">\tfclose(f);\t\t\t\t\t\t\t\t\t\t\t\t    \\</span></span><br><span class=\"line\"><span class=\"meta\">&#125;  </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> readBias(FILE_MAT, w)\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">&#123;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\tFILE* f = fopen(FILE_MAT, <span class=\"string\">&quot;r&quot;</span>);\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\t<span class=\"keyword\">if</span> (!f) return 1;\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\tdouble tmp = 0;\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\tint idx = 0;\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\twhile (fscanf(f, <span class=\"string\">&quot;%lf&quot;</span>, &amp;tmp) != EOF) &#123;\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\t\tw[idx++] = tmp;\t\t\t\t\t\t\t\t\t        \\</span></span><br><span class=\"line\"><span class=\"meta\">\t&#125;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\tfclose(f);\t\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">&#125;  </span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"predict\"><a href=\"#predict\" class=\"headerlink\" title=\"predict\"></a>predict</h4><p>å¾ªç¯è¯»å–<code>imageSet</code>æ¯ä¸€å¼ å¾…æµ‹è¯•å›¾åˆ°<code>input</code>ï¼Œ<code>predict</code>å›¾ç‰‡å¯¹åº”çš„å€¼å¹¶ä¸<code>label</code>è¿›è¡Œæ¯”è¾ƒã€‚</p>\n<p>ä½¿ç”¨å…¨å±€å˜é‡å­˜å‚¨å„å±‚çš„ç‰¹å¾å›¾ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//feature maps</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> LENGTH_FEATURE0\t28</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> LENGTH_FEATURE1\t(LENGTH_FEATURE0 - LENGTH_KERNEL_0_1 + 1)  <span class=\"comment\">//24</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> LENGTH_FEATURE2\t(LENGTH_FEATURE1 &gt;&gt; 1)                 <span class=\"comment\">//12</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> LENGTH_FEATURE3\t(LENGTH_FEATURE2 - LENGTH_KERNEL_2_3 + 1)  <span class=\"comment\">//8</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span>\tLENGTH_FEATURE4\t(LENGTH_FEATURE3 &gt;&gt; 1)\t\t\t       <span class=\"comment\">//4</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> LENGTH_FEATURE5\t(LENGTH_FEATURE4 - LENGTH_KERNEL_4_5+ 1)  <span class=\"comment\">//1</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> LENGTH_FEATURE6\t1</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> LENGTH_FEATURE7\t1</span></span><br><span class=\"line\"><span class=\"type\">double</span> input[INPUT][LENGTH_FEATURE0][LENGTH_FEATURE0];</span><br><span class=\"line\"><span class=\"type\">double</span> layer1[LAYER1][LENGTH_FEATURE1][LENGTH_FEATURE1];</span><br><span class=\"line\"><span class=\"type\">double</span> layer2[LAYER2][LENGTH_FEATURE2][LENGTH_FEATURE2];</span><br><span class=\"line\"><span class=\"type\">double</span> layer3[LAYER3][LENGTH_FEATURE3][LENGTH_FEATURE3];</span><br><span class=\"line\"><span class=\"type\">double</span> layer4[LAYER4][LENGTH_FEATURE4][LENGTH_FEATURE4];</span><br><span class=\"line\"><span class=\"type\">double</span> layer5[LAYER5][LENGTH_FEATURE5][LENGTH_FEATURE5];</span><br><span class=\"line\"><span class=\"type\">double</span> layer6[LAYER6][LENGTH_FEATURE6][LENGTH_FEATURE6];</span><br><span class=\"line\"><span class=\"type\">double</span> layer7[LAYER7][LENGTH_FEATURE7][LENGTH_FEATURE7];</span><br></pre></td></tr></table></figure>\n\n<p><code>predict</code>å‡½æ•°å¦‚ä¸‹æ‰€ç¤º</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\">uint8 <span class=\"title function_\">Predict</span><span class=\"params\">()</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"built_in\">memset</span>(layer1, <span class=\"number\">0</span>, LAYER1 * LENGTH_FEATURE1 * LENGTH_FEATURE1 * <span class=\"keyword\">sizeof</span>(<span class=\"type\">double</span>));</span><br><span class=\"line\">\t<span class=\"built_in\">memset</span>(layer2, <span class=\"number\">0</span>, LAYER2 * LENGTH_FEATURE2 * LENGTH_FEATURE2 * <span class=\"keyword\">sizeof</span>(<span class=\"type\">double</span>));</span><br><span class=\"line\">\t<span class=\"built_in\">memset</span>(layer3, <span class=\"number\">0</span>, LAYER3 * LENGTH_FEATURE3 * LENGTH_FEATURE3 * <span class=\"keyword\">sizeof</span>(<span class=\"type\">double</span>));</span><br><span class=\"line\">\t<span class=\"built_in\">memset</span>(layer4, <span class=\"number\">0</span>, LAYER4 * LENGTH_FEATURE4 * LENGTH_FEATURE4 * <span class=\"keyword\">sizeof</span>(<span class=\"type\">double</span>));</span><br><span class=\"line\">\t<span class=\"built_in\">memset</span>(layer5, <span class=\"number\">0</span>, LAYER5 * LENGTH_FEATURE5 * LENGTH_FEATURE5 * <span class=\"keyword\">sizeof</span>(<span class=\"type\">double</span>));</span><br><span class=\"line\">\t<span class=\"built_in\">memset</span>(layer6, <span class=\"number\">0</span>, LAYER6 * LENGTH_FEATURE6 * LENGTH_FEATURE6 * <span class=\"keyword\">sizeof</span>(<span class=\"type\">double</span>));</span><br><span class=\"line\">\t<span class=\"built_in\">memset</span>(layer7, <span class=\"number\">0</span>, LAYER7 * LENGTH_FEATURE7 * LENGTH_FEATURE7 * <span class=\"keyword\">sizeof</span>(<span class=\"type\">double</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">\tCONVOLUTION_FORWARD(input, layer1, weight0_1, bias0_1);</span><br><span class=\"line\">\tSUBSAMP_MAX_FORWARD(layer1, layer2);</span><br><span class=\"line\">\tCONVOLUTION_FORWARD(layer2, layer3, weight2_3, bias2_3);</span><br><span class=\"line\">\tSUBSAMP_MAX_FORWARD(layer3, layer4);</span><br><span class=\"line\">\tCONVOLUTION_FORWARD(layer4, layer5, weight4_5, bias4_5);</span><br><span class=\"line\">\tCONVOLUTION_FORWARD(layer5, layer6, weight5_6, bias5_6);</span><br><span class=\"line\">\tCONVOLUTION_FORWARD(layer6, layer7, weight6_7, bias6_7);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"type\">int</span> ans = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"type\">double</span> maxValue = layer7[ans][<span class=\"number\">0</span>][<span class=\"number\">0</span>];</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">1</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (layer7[i][<span class=\"number\">0</span>][<span class=\"number\">0</span>] &gt; maxValue) &#123;</span><br><span class=\"line\">\t\t\tmaxValue = layer7[i][<span class=\"number\">0</span>][<span class=\"number\">0</span>];</span><br><span class=\"line\">\t\t\tans = i;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> ans;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>å®å‡½æ•°<code>CONVOLUTION_FORWARD</code>å’Œ<code>SUBSAMP_MAX_FORWARD</code>å¦‚ä¸‹æ‰€ç¤ºã€‚<code>SUBSAMP_MAX_FORWARD</code>ä½¿ç”¨çš„æ± åŒ–å‚æ•°K&#x3D;2,S&#x3D;2ï¼Œè¿›è¡Œæœ€å¤§å€¼é‡‡æ ·ã€‚<code>CONVOLUTION_FORWARD</code>ç”¨äºå¯¹ä¸Šä¸€å±‚å·ç§¯å¾—åˆ°ä¸‹ä¸€å±‚ï¼Œå…¶åŸç†ï¼ˆå¾ªç¯æ¬¡åºï¼‰ä¸ºï¼š</p>\n<p>è¾“å‡ºå±‚çš„ç¬¬<code>y</code>å¼ å›¾</p>\n<p>â€‹\tè¾“å…¥å±‚çš„ç¬¬<code>x</code>å¼ å›¾</p>\n<p>â€‹\t\t<code>(x,y)</code>ç¡®å®šéœ€è¦ä½¿ç”¨çš„æƒé‡æ•°ç»„ï¼Œè®¡ç®—è¾“å…¥å±‚çš„ç¬¬<code>y</code>å¼ å›¾è´¡çŒ®ç»™è¾“å‡ºå±‚çš„ç¬¬<code>x</code>å¼ å›¾çš„<code>æ¯ä¸ªpixel</code>çš„å·ç§¯å€¼çš„ç´¯åŠ é‡</p>\n<figure class=\"highlight c\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> CONVOLUTE_VALID(input,output,weight)\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">&#123;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\tFOREACH(o0,GETLENGTH(output))\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\t\tFOREACH(o1,GETLENGTH(*(output)))\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\t\t\tFOREACH(w0,GETLENGTH(weight))\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\t\t\t\tFOREACH(w1,GETLENGTH(*(weight)))\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\t\t\t\t\t(output)[o0][o1] += (input)[o0 + w0][o1 + w1] * (weight)[w0][w1];\t\\</span></span><br><span class=\"line\"><span class=\"meta\">&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> CONVOLUTION_FORWARD(input,output,weight,bias)\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">&#123;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\tfor (int x = 0; x &lt; GETLENGTH(weight); ++x)\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\t\tfor (int y = 0; y &lt; GETLENGTH(*weight); ++y)\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\t\t\tCONVOLUTE_VALID(input[x], output[y], weight[x][y]);\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\tFOREACH(j, GETLENGTH(output))\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\t\tFOREACH(i, GETCOUNT(output[j]))\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\t\t((double *)output[j])[i] = relu(((double *)output[j])[i] + bias[j]);\t\\</span></span><br><span class=\"line\"><span class=\"meta\">&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">define</span> SUBSAMP_MAX_FORWARD(input,output)\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">&#123;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\tconst int len0 = GETLENGTH(*(input)) / GETLENGTH(*(output));\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\tconst int len1 = GETLENGTH(**(input)) / GETLENGTH(**(output));\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\tFOREACH(i, GETLENGTH(output))\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\tFOREACH(o0, GETLENGTH(*(output)))\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\tFOREACH(o1, GETLENGTH(**(output)))\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\t&#123;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\t\tint x0 = 0, x1 = 0, ismax;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\t\tFOREACH(l0, len0)\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\t\t\tFOREACH(l1, len1)\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\t\t&#123;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\t\t\tismax = input[i][o0*len0 + l0][o1*len1 + l1] &gt; input[i][o0*len0 + x0][o1*len1 + x1];\\</span></span><br><span class=\"line\"><span class=\"meta\">\t\t\tx0 += ismax * (l0 - x0);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\t\t\tx1 += ismax * (l1 - x1);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\t\t&#125;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\t\toutput[i][o0][o1] = input[i][o0*len0 + x0][o1*len1 + x1];\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">\t&#125;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\\</span></span><br><span class=\"line\"><span class=\"meta\">&#125;</span></span><br></pre></td></tr></table></figure>\n\n<p>ä¸ºäº†å°½å¯èƒ½å¤ç”¨ä¸Šè¿°<code>CONVOLUTION_FORWARD</code>å®å‡½æ•°ï¼Œæˆ‘ä»¬å°†æœ€åä¸‰å±‚flatå±‚ä¹Ÿè¡¨ç¤ºæˆä¸‰ç»´æ•°ç»„ï¼Œå³<code>layer5</code>ã€<code>layer6</code>ã€<code>layer7</code>ã€‚</p>\n<h3 id=\"å®éªŒæ­¥éª¤\"><a href=\"#å®éªŒæ­¥éª¤\" class=\"headerlink\" title=\"å®éªŒæ­¥éª¤\"></a>å®éªŒæ­¥éª¤</h3><h4 id=\"ç¯å¢ƒ\"><a href=\"#ç¯å¢ƒ\" class=\"headerlink\" title=\"ç¯å¢ƒ\"></a>ç¯å¢ƒ</h4><p>vs2022 Debug x64</p>\n<p>win10</p>\n<h4 id=\"æµ‹è¯•ç»“æœ\"><a href=\"#æµ‹è¯•ç»“æœ\" class=\"headerlink\" title=\"æµ‹è¯•ç»“æœ\"></a>æµ‹è¯•ç»“æœ</h4><h5 id=\"20å¼ pngæµ‹è¯•é›†\"><a href=\"#20å¼ pngæµ‹è¯•é›†\" class=\"headerlink\" title=\"20å¼ pngæµ‹è¯•é›†\"></a>20å¼ pngæµ‹è¯•é›†</h5><p>ä½¿ç”¨Lab1&#x2F;Data&#x2F;lenet_weightsæä¾›çš„å‚æ•°æ„å»ºçš„lenet5ç½‘ç»œï¼Œå¯¹20å¼ pngå¤„ç†å¾—åˆ°çš„æµ‹è¯•é›†ï¼Œå¾—åˆ°çš„æµ‹è¯•ç»“æœå¦‚ä¸‹æ‰€ç¤ºã€‚</p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220717192236201.png\" alt=\"image-20220717192236201\"></p>\n<h5 id=\"åŸå§‹mnistæµ‹è¯•é›†\"><a href=\"#åŸå§‹mnistæµ‹è¯•é›†\" class=\"headerlink\" title=\"åŸå§‹mnistæµ‹è¯•é›†\"></a>åŸå§‹mnistæµ‹è¯•é›†</h5><p>ä½¿ç”¨Lab1&#x2F;Data&#x2F;lenet_weightsæä¾›çš„å‚æ•°æ„å»ºçš„lenet5ç½‘ç»œï¼Œmnist t10k-images-idx3-ubyteä½œä¸ºæµ‹è¯•é›†ï¼Œå¾—åˆ°çš„æµ‹è¯•ç»“æœå¦‚ä¸‹æ‰€ç¤ºã€‚</p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220717193342925.png\" alt=\"image-20220717193342925\"></p>\n<h5 id=\"é¢å¤–æµ‹è¯•\"><a href=\"#é¢å¤–æµ‹è¯•\" class=\"headerlink\" title=\"é¢å¤–æµ‹è¯•\"></a>é¢å¤–æµ‹è¯•</h5><h6 id=\"åç›¸å¤„ç†æµ‹è¯•é›†\"><a href=\"#åç›¸å¤„ç†æµ‹è¯•é›†\" class=\"headerlink\" title=\"åç›¸å¤„ç†æµ‹è¯•é›†\"></a>åç›¸å¤„ç†æµ‹è¯•é›†</h6><p>è¯»å‡ºæ¯å¼ mnistå›¾æ—¶ï¼Œå°†æ¯ä¸ªåƒç´ çš„å€¼è¿›è¡Œ255-ç°åº¦å€¼å¤„ç†å¹¶èµ‹å€¼ç»™inputï¼Œè¿›è¡Œpredictå¾—åˆ°å¦‚ä¸‹ç»“æœã€‚</p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220717194059859.png\" alt=\"image-20220717194059859\"></p>\n<h6 id=\"è½´å¯¹ç§°å¤„ç†æµ‹è¯•é›†\"><a href=\"#è½´å¯¹ç§°å¤„ç†æµ‹è¯•é›†\" class=\"headerlink\" title=\"è½´å¯¹ç§°å¤„ç†æµ‹è¯•é›†\"></a>è½´å¯¹ç§°å¤„ç†æµ‹è¯•é›†</h6><p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220717194833823.png\" alt=\"image-20220717194833823\"></p>\n<p>å¯ä»¥å‘ç°åè‰²å’Œè½´å¯¹ç§°å¤„ç†ä¼šå¯¼è‡´æƒé‡æ•°æ®å¤±æ•ˆã€‚</p>\n<h3 id=\"REFERENCE\"><a href=\"#REFERENCE\" class=\"headerlink\" title=\"REFERENCE\"></a>REFERENCE</h3><p><a href=\"https://blog.csdn.net/baidu_40840693/article/details/82897351?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522165787826516782350816977%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&request_id=165787826516782350816977&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-3-82897351-null-null.185%5Ev2%5Econtrol&utm_term=LeNet-5%20%E7%A0%94%E4%B9%A0&spm=1018.2226.3001.4450\">LeNet-5 ç ”ä¹ </a></p>\n<p><a href=\"https://www.ruanx.net/lenet/\">LeNetï¼šç¬¬ä¸€ä¸ªå·ç§¯ç¥ç»ç½‘ç»œ</a></p>\n<p><a href=\"https://github.com/fan-wenjie/LeNet-5\">LeNet-5,Use C Program Language Without Any 3rd Library</a></p>\n<p><a href=\"https://blog.csdn.net/DarrenXf/article/details/85232255\">MNISTæ•°æ®é›†çš„æ ¼å¼ä»¥åŠè¯»å–æ–¹å¼</a></p>\n<p><a href=\"https://www.cnblogs.com/senior-engineer/p/9548347.html\">PNGæ–‡ä»¶æ ¼å¼è¯¦è§£</a></p>\n<p><a href=\"http://yann.lecun.com/exdb/mnist/\">THE MNIST DATABASE</a></p>\n","tags":["ç¥ç»ç½‘ç»œ"]},{"title":"ä»£ç†æŠ€æœ¯","url":"/2022/05/28/%E4%BB%A3%E7%90%86%E6%8A%80%E6%9C%AF/","content":"<h1 id=\"ä»£ç†æŠ€æœ¯\"><a href=\"#ä»£ç†æŠ€æœ¯\" class=\"headerlink\" title=\"ä»£ç†æŠ€æœ¯\"></a>ä»£ç†æŠ€æœ¯</h1><h2 id=\"ä»£ç†åè®®å·¥ä½œåœ¨å“ªä¸€å±‚\"><a href=\"#ä»£ç†åè®®å·¥ä½œåœ¨å“ªä¸€å±‚\" class=\"headerlink\" title=\"ä»£ç†åè®®å·¥ä½œåœ¨å“ªä¸€å±‚\"></a>ä»£ç†åè®®å·¥ä½œåœ¨å“ªä¸€å±‚</h2><p>Socksä»£ç†åè®®æ˜¯ä¸€ç§å·¥ä½œåœ¨<em><strong>çº¿è·¯å±‚</strong></em>çš„åè®®ï¼ŒHTTPä»£ç†åè®®æ˜¯ä¸€ç§å·¥ä½œåœ¨<em><strong>åº”ç”¨å±‚</strong></em>çš„åè®®ã€‚</p>\n<h2 id=\"åŸºäºè™šæ‹Ÿè®¾å¤‡TUN-x2F-TAPæŠ€æœ¯çš„â€œçœŸâ€å…¨å±€ä»£ç†\"><a href=\"#åŸºäºè™šæ‹Ÿè®¾å¤‡TUN-x2F-TAPæŠ€æœ¯çš„â€œçœŸâ€å…¨å±€ä»£ç†\" class=\"headerlink\" title=\"åŸºäºè™šæ‹Ÿè®¾å¤‡TUN&#x2F;TAPæŠ€æœ¯çš„â€œçœŸâ€å…¨å±€ä»£ç†\"></a>åŸºäºè™šæ‹Ÿè®¾å¤‡TUN&#x2F;TAPæŠ€æœ¯çš„â€œçœŸâ€å…¨å±€ä»£ç†</h2><p> SOCKS5å·¥ä½œåœ¨çº¿è·¯å±‚ï¼Œ<strong>SOCKS</strong>åè®®ä½äºä¼ è¾“å±‚(<strong>TCP</strong>&#x2F;<strong>UDP</strong>ç­‰)ä¸åº”ç”¨å±‚ä¹‹é—´ï¼Œæ‰€ä»¥èƒ½ä»£ç†TCPå’ŒUDPçš„ç½‘ç»œæµé‡ï¼Œ<strong>å¯¹äºä¹‹ä¸‹çš„ç½‘ç»œæµé‡ï¼Œå°±æ— èƒ½ä¸ºåŠ›äº†</strong>ã€‚</p>\n<p>TUN2SOCKSä½¿ç”¨tunç½‘å¡å®ç°äº†æ›´åŠ åº•å±‚çš„æµé‡ä»£ç†ï¼Œè¿™ç§å…¨å±€ä»£ç†ä¸ä»…å¯ä»¥ä»£ç†ä¼ è¾“å±‚æµé‡ï¼Œè¿˜å¯ä»¥ä»£ç†å…¶å®ƒæ‰€æœ‰åº”ç”¨ç¨‹åºçš„è¯·æ±‚æµé‡ï¼Œæ¯”å¦‚ä»£ç†æ¸¸æˆçš„æµé‡ï¼Œä»£ç†æ‰€æœ‰å‘½ä»¤è¡Œå·¥å…·çš„æµé‡ã€‚</p>\n<p>ä¸€èˆ¬çš„ä»£ç†è½¯ä»¶çš„â€œå…¨å±€ä»£ç†â€æŒ‡çš„æ˜¯ä¸è®ºè®¿é—®çš„IPæ˜¯å“ªçš„å…¨éƒ¨éƒ½èµ°ä»£ç†ï¼Œä½†æ˜¯è¿™ç§ä»£ç†è½¯ä»¶ä½¿ç”¨çš„ä»£ç†åè®®çš„å·¥ä½œå±‚æ¬¡æ˜¯<strong>ä¸å¤Ÿåº•å±‚</strong>çš„ï¼Œåœ¨cmdä¼šå‘ç°<strong>æ— æ³•pingé€šgoogle</strong>ï¼ˆä½†æ˜¯<strong>ä½¿ç”¨curlå´èƒ½å¤Ÿè·å¾—googleçš„htmlå†…å®¹</strong>ï¼Œè¿™æ˜¯å› ä¸ºpingèµ°çš„æ˜¯ICMPè€Œcurlèµ°çš„æ˜¯HTTPï¼‰ã€‚</p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220525102729845.png\" alt=\"image-20220525102729845\"></p>\n<p>è€ŒåƒNetchç­‰æ¯”è¾ƒä¸“ä¸šçš„ä»£ç†è½¯ä»¶åˆ™ä½¿ç”¨äº†tun2socksç­‰è™šæ‹Ÿç½‘å¡æŠ€æœ¯ï¼Œåœ¨ä½¿ç”¨è¿™ç§è½¯ä»¶çš„å…¨å±€ä»£ç†æ—¶æ˜¯å¯ä»¥åœ¨cmdä¸­ä½¿ç”¨pingé€šgoogleçš„ã€‚</p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220525103044641.png\" alt=\"image-20220525103044641\"></p>\n<p>å› æ­¤ï¼Œåƒè¦ä½¿ç”¨pipã€apt-getç­‰éœ€è¦åœ¨shellä¸­è®¿é—®å¤–ç½‘çš„åœºæ™¯æ—¶ï¼Œå¼ºçƒˆæ¨èNetchç­‰ä½¿ç”¨åŸºäºè™šæ‹Ÿç½‘å¡çš„èƒ½å¤Ÿä»£ç†ä½å±‚æ•°æ®åŒ…çš„è½¯ä»¶ã€‚</p>\n<h2 id=\"å¦‚ä½•ä½¿å¾—è™šæ‹Ÿæœºçš„æµé‡ä¹Ÿèµ°ä»£ç†\"><a href=\"#å¦‚ä½•ä½¿å¾—è™šæ‹Ÿæœºçš„æµé‡ä¹Ÿèµ°ä»£ç†\" class=\"headerlink\" title=\"å¦‚ä½•ä½¿å¾—è™šæ‹Ÿæœºçš„æµé‡ä¹Ÿèµ°ä»£ç†\"></a>å¦‚ä½•ä½¿å¾—è™šæ‹Ÿæœºçš„æµé‡ä¹Ÿèµ°ä»£ç†</h2><p><strong>åœºæ™¯ï¼š</strong></p>\n<ol>\n<li>VMware Ubuntuè™šæ‹Ÿæœºè¦ä½¿ç”¨aptç­‰å®‰è£…è½¯ä»¶<em><strong>ï¼ˆæ˜¾ç„¶æˆ‘ä»¬ä¸æƒ³æä»€ä¹ˆæ¢æºï¼‰</strong></em></li>\n<li>å¼€å‘æ¿ï¼ˆä¾‹å¦‚PYNQï¼‰ä¸Šè·‘çš„Ubuntuè¦ä½¿ç”¨aptç­‰å®‰è£…è½¯ä»¶<em><strong>ï¼ˆæ˜¾ç„¶æˆ‘ä»¬ä¸æƒ³æä»€ä¹ˆæ¢æºï¼‰</strong></em>ï¼Œä¸”å¼€å‘æ¿æ˜¯é€šè¿‡ç½‘çº¿ä¸PCè¿æ¥çš„ã€‚</li>\n</ol>\n<p><strong>æ–¹æ³•1ï¼š</strong></p>\n<p>é¦–å…ˆåœ¨å®¿ä¸»æœºä¸Šæ‰“å¼€ä»£ç†ï¼Œå¹¶ä¸”ç¡®å®š<em><strong>å…è®¸å…¶ä»–è®¾å¤‡è¿å…¥Socks5æœ¬åœ°ç«¯å£</strong></em></p>\n<p>ä¹‹ååœ¨è™šæ‹Ÿæœºç»ˆç«¯ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p>\n<p><code>export  ALL_PROXY=socks5://192.168.86.1:2801</code></p>\n<p>æ³¨æ„æ›´æ”¹IPå’Œç«¯å£ã€‚</p>\n<p><strong>æ–¹æ³•2ï¼š</strong></p>\n<p>é¦–å…ˆéœ€è¦åœ¨å®¿ä¸»ä¸Šè¿è¡Œèµ·clashï¼Œå¹¶å°†clashè¿›è¡Œå¦‚ä¸‹è®¾ç½®ã€‚</p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220724115525450.png\" alt=\"image-20220724115525450\"></p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220724122944605.png\" alt=\"image-20220724122944605\"></p>\n<p>VMwareä¸­å°†è™šæ‹Ÿçš„ç½‘ç»œé€‚é…å™¨è®¾ç½®ä¸ºNATï¼Œå–æ¶ˆè™šæ‹ŸæœºUbuntuçš„æ‰‹åŠ¨DNSï¼Œè®¾ç½®ä¸ºè‡ªåŠ¨ã€‚</p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220724120024200.png\" alt=\"image-20220724120024200\"></p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220724115856787.png\" alt=\"image-20220724115856787\"></p>\n<p>è®¾ç½®å®Œæ¯•ï¼Œæ•ˆæœå¦‚ä¸‹ã€‚</p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220724120101155.png\" alt=\"image-20220724120101155\"></p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220724123536306.png\" alt=\"image-20220724123536306\"></p>\n<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§æ–¹æ³•è®¾ç½®ä¸‹è™½ç„¶å®¿ä¸»æœºå’Œè™šæ‹Ÿæœºå‡èƒ½pingé€šgoogleï¼Œä½†æ˜¯æ‰€æ˜¾ç¤ºçš„googleçš„IPéƒ½æ˜¯é”™è¯¯çš„ï¼ˆæ˜¯ä¸€ä¸ªä¿ç•™IPåœ°å€ï¼‰ï¼Œè¿™åº”è¯¥ä¸Clash TUNç½‘å¡çš„å·¥ä½œæœºåˆ¶æœ‰å…³ç³»ã€‚</p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220724123639930.png\" alt=\"image-20220724123639930\"></p>\n<p><strong>æ–¹æ³•3ï¼š</strong></p>\n<p>åœ¨è™šæ‹Ÿæœºé‡Œç›´æ¥è·‘clash</p>\n<h2 id=\"å¾…ç ”ç©¶çš„å†…å®¹\"><a href=\"#å¾…ç ”ç©¶çš„å†…å®¹\" class=\"headerlink\" title=\"å¾…ç ”ç©¶çš„å†…å®¹\"></a>å¾…ç ”ç©¶çš„å†…å®¹</h2><p>KCP</p>\n<p>DNS Hijackï¼ˆAioDNSï¼‰</p>\n<h2 id=\"åˆé€‚çš„è½¯ä»¶\"><a href=\"#åˆé€‚çš„è½¯ä»¶\" class=\"headerlink\" title=\"åˆé€‚çš„è½¯ä»¶\"></a>åˆé€‚çš„è½¯ä»¶</h2><p>ClashçœŸé¦™ğŸ˜„</p>\n","tags":["VPN"]},{"title":"Pythonè£…é¥°å™¨å®ç°å¯¹ï¼ˆé€’å½’ï¼‰å‡½æ•°è¿è¡Œæ—¶é—´è®¡æ—¶","url":"/2022/06/04/python-decorator/","content":"<h1 id=\"Python-è£…é¥°å™¨\"><a href=\"#Python-è£…é¥°å™¨\" class=\"headerlink\" title=\"Python è£…é¥°å™¨\"></a>Python è£…é¥°å™¨</h1><p>åœºæ™¯éœ€æ±‚ï¼šéœ€è¦å¯¹å‡½æ•°è¿è¡Œæ—¶é—´è¿›è¡Œè®¡æ—¶ï¼Œå¸Œæœ›èƒ½å¤Ÿè‡ªåŠ¨åŒ–å®Œæˆè®¡æ—¶ä»£ç çš„æ’æ¡©å·¥ä½œã€‚</p>\n<p>éš¾ç‚¹ï¼šé€’å½’å‡½æ•°ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œå‡è®¾æˆ‘è°ƒç”¨fibonacci(4)ï¼Œæˆ‘ä¸å¸Œæœ›è®¡æ—¶åªè®¡æœ€å¤–å±‚çš„å‡½æ•°ï¼Œè€Œæ˜¯å¸Œæœ›æ¯ä¸€ä¸ªè¢«è°ƒç”¨çš„fibonacci()éƒ½è¾“å‡ºï¼Œfibçš„è°ƒç”¨å±‚æ¬¡å¦‚ä¸‹å›¾æ‰€ç¤º</p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220604190247526.png\" alt=\"image-20220604190247526\"></p>\n<p>ä¹Ÿå°±æ˜¯è®¡æ—¶å™¨åº”è¯¥è¾“å‡º5æ¬¡å‡½æ•°è¿è¡Œè€—æ—¶</p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/197643740\">è§£å†³æ–¹æ¡ˆ</a>ï¼Œè¿è¡Œç»“æœï¼š</p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220604190426304.png\" alt=\"image-20220604190426304\"></p>\n<p>æ„Ÿæƒ³ï¼ˆï¼Ÿï¼‰ï¼šPythonå¥½å¼ºå¤§</p>\n<h1 id=\"å…³äºPythonè£…é¥°å™¨æ¨¡å¼å’Œå‡½æ•°å¼ç¼–ç¨‹çš„å…³ç³»ï¼š\"><a href=\"#å…³äºPythonè£…é¥°å™¨æ¨¡å¼å’Œå‡½æ•°å¼ç¼–ç¨‹çš„å…³ç³»ï¼š\" class=\"headerlink\" title=\"å…³äºPythonè£…é¥°å™¨æ¨¡å¼å’Œå‡½æ•°å¼ç¼–ç¨‹çš„å…³ç³»ï¼š\"></a>å…³äºPythonè£…é¥°å™¨æ¨¡å¼å’Œå‡½æ•°å¼ç¼–ç¨‹çš„å…³ç³»ï¼š</h1><h1 id=\"Python-çš„-Decorator\"><a href=\"#Python-çš„-Decorator\" class=\"headerlink\" title=\"Python çš„ Decorator\"></a>Python çš„ Decorator</h1><blockquote>\n<p>Python çš„ Decorator åœ¨ä½¿ç”¨ä¸Šå’Œ Java çš„ Annotationï¼ˆä»¥åŠ C# çš„ Attributeï¼‰å¾ˆç›¸ä¼¼ï¼Œå°±æ˜¯åœ¨æ–¹æ³•åå‰é¢åŠ ä¸€ä¸ª <a href=\"https://my.oschina.net/xrf116\">@XXX</a> æ³¨è§£æ¥ä¸ºè¿™ä¸ªæ–¹æ³•è£…é¥°ä¸€äº›ä¸œè¥¿ã€‚ä½†æ˜¯ï¼ŒJava&#x2F;C# çš„ Annotation ä¹Ÿå¾ˆè®©äººæœ›è€Œå´æ­¥ï¼Œå¤ªè¿‡äºå¤æ‚äº†ã€‚ä½ è¦ç©å®ƒï¼Œéœ€è¦å…ˆäº†è§£ä¸€å † Annotation çš„ç±»åº“æ–‡æ¡£ï¼Œæ„Ÿè§‰å‡ ä¹å°±æ˜¯åœ¨å­¦å¦å¤–ä¸€é—¨è¯­è¨€ã€‚</p>\n<p>è€Œ Python ä½¿ç”¨äº†ä¸€ç§ç›¸å¯¹äº Decorator Pattern å’Œ Annotation æ¥è¯´éå¸¸ä¼˜é›…çš„æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•ä¸éœ€è¦ä½ å»æŒæ¡ä»€ä¹ˆå¤æ‚çš„ OO æ¨¡å‹æˆ–æ˜¯ Annotation çš„å„ç§ç±»åº“è§„å®šï¼Œå®Œå…¨å°±æ˜¯è¯­è¨€å±‚é¢çš„ç©æ³•ï¼šä¸€ç§å‡½æ•°å¼ç¼–ç¨‹çš„æŠ€å·§ã€‚</p>\n<p>è¿™æ˜¯æˆ‘æœ€å–œæ¬¢çš„ä¸€ä¸ªæ¨¡å¼äº†ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæŒºå¥½ç©å„¿çš„ä¸œè¥¿ï¼Œè¿™ä¸ªæ¨¡å¼åŠ¨ç”¨äº†å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ä¸ªæŠ€æœ¯â€”â€”ç”¨ä¸€ä¸ªå‡½æ•°æ¥æ„é€ å¦ä¸€ä¸ªå‡½æ•°ã€‚</p>\n<p>å¥½äº†ï¼Œæˆ‘ä»¬å…ˆæ¥ç‚¹æ„Ÿæ€§è®¤è¯†ï¼Œçœ‹ä¸€ä¸ª Python ä¿®é¥°å™¨çš„ Hello World ä»£ç ã€‚</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">hello</span>(<span class=\"params\">fn</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">wrapper</span>():</span><br><span class=\"line\">        <span class=\"built_in\">print</span> <span class=\"string\">&quot;hello, %s&quot;</span> % fn.__name__</span><br><span class=\"line\">        fn()</span><br><span class=\"line\">        <span class=\"built_in\">print</span> <span class=\"string\">&quot;goodbye, %s&quot;</span> % fn.__name__</span><br><span class=\"line\">    <span class=\"keyword\">return</span> wrapper</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@hello</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">Hao</span>():</span><br><span class=\"line\">    <span class=\"built_in\">print</span> <span class=\"string\">&quot;i am Hao Chen&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">Hao()</span><br></pre></td></tr></table></figure>\n\n<p>ä»£ç çš„æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ python hello.py</span><br><span class=\"line\">hello, Hao</span><br><span class=\"line\">i am Hao Chen</span><br><span class=\"line\">goodbye, Hao</span><br></pre></td></tr></table></figure>\n\n<p>ä½ å¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„ä¸œè¥¿ï¼š</p>\n<ol>\n<li>å‡½æ•°<code>Hao</code>å‰é¢æœ‰ä¸ª <a href=\"https://my.oschina.net/flyinghawk\">@hello</a> çš„â€œæ³¨è§£â€ï¼Œ<code>hello</code>å°±æ˜¯æˆ‘ä»¬å‰é¢å®šä¹‰çš„å‡½æ•°<code>hello</code>ï¼›</li>\n<li>åœ¨<code>hello</code>å‡½æ•°ä¸­ï¼Œå…¶éœ€è¦ä¸€ä¸ª<code>fn</code>çš„å‚æ•°ï¼ˆè¿™å°±æ˜¯ç”¨æ¥åšå›è°ƒçš„å‡½æ•°ï¼‰ï¼›</li>\n<li>hello å‡½æ•°ä¸­è¿”å›äº†ä¸€ä¸ª inner å‡½æ•°<code>wrapper</code>ï¼Œè¿™ä¸ª<code>wrapper</code>å‡½æ•°å›è°ƒäº†ä¼ è¿›æ¥çš„<code>fn</code>ï¼Œå¹¶åœ¨å›è°ƒå‰ååŠ äº†ä¸¤æ¡è¯­å¥ã€‚</li>\n</ol>\n<p>å¯¹äº Python çš„è¿™ä¸ª @æ³¨è§£è¯­æ³•ç³–ï¼ˆsyntactic sugarï¼‰æ¥è¯´ï¼Œå½“ä½ åœ¨ç”¨æŸä¸ª @decorator æ¥ä¿®é¥°æŸä¸ªå‡½æ•°<code>func</code>æ—¶ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@decorator</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">func</span>():</span><br><span class=\"line\">    <span class=\"keyword\">pass</span></span><br></pre></td></tr></table></figure>\n\n<p>å…¶è§£é‡Šå™¨ä¼šè§£é‡Šæˆä¸‹é¢è¿™æ ·çš„è¯­å¥ï¼š</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\">func = decorator(func)</span><br></pre></td></tr></table></figure>\n\n<p>å˜¿ï¼è¿™ä¸å°±æ˜¯æŠŠä¸€ä¸ªå‡½æ•°å½“å‚æ•°ä¼ åˆ°å¦ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œç„¶åå†å›è°ƒå—ï¼Ÿæ˜¯çš„ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ï¼Œé‚£é‡Œè¿˜æœ‰ä¸€ä¸ªèµ‹å€¼è¯­å¥ï¼ŒæŠŠ decorator è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼èµ‹å€¼å›äº†åŸæ¥çš„<code>func</code>ã€‚</p>\n<p>æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªå¸¦å‚æ•°çš„ç©æ³•ï¼š</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">makeHtmlTag</span>(<span class=\"params\">tag, *args, **kwds</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">real_decorator</span>(<span class=\"params\">fn</span>):</span><br><span class=\"line\">        css_class = <span class=\"string\">&quot; class=&#x27;&#123;0&#125;&#x27;&quot;</span>.<span class=\"built_in\">format</span>(kwds[<span class=\"string\">&quot;css_class&quot;</span>]) \\</span><br><span class=\"line\">                                     <span class=\"keyword\">if</span> <span class=\"string\">&quot;css_class&quot;</span> <span class=\"keyword\">in</span> kwds <span class=\"keyword\">else</span> <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">        <span class=\"keyword\">def</span> <span class=\"title function_\">wrapped</span>(<span class=\"params\">*args, **kwds</span>):</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"string\">&quot;&lt;&quot;</span>+tag+css_class+<span class=\"string\">&quot;&gt;&quot;</span> + fn(*args, **kwds) + <span class=\"string\">&quot;&lt;/&quot;</span>+tag+<span class=\"string\">&quot;&gt;&quot;</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> wrapped</span><br><span class=\"line\">    <span class=\"keyword\">return</span> real_decorator</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@makeHtmlTag(<span class=\"params\">tag=<span class=\"string\">&quot;b&quot;</span>, css_class=<span class=\"string\">&quot;bold_css&quot;</span></span>)</span></span><br><span class=\"line\"><span class=\"meta\">@makeHtmlTag(<span class=\"params\">tag=<span class=\"string\">&quot;i&quot;</span>, css_class=<span class=\"string\">&quot;italic_css&quot;</span></span>)</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">hello</span>():</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;hello world&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">print</span> hello()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è¾“å‡ºï¼š</span></span><br><span class=\"line\"><span class=\"comment\"># &lt;b class=&#x27;bold_css&#x27;&gt;&lt;i class=&#x27;italic_css&#x27;&gt;hello world&lt;/i&gt;&lt;/b&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š<code>makeHtmlTag</code>æœ‰ä¸¤ä¸ªå‚æ•°ã€‚æ‰€ä»¥ï¼Œä¸ºäº†è®©<code>hello = makeHtmlTag(arg1, arg2)(hello)</code>æˆåŠŸï¼Œ<code>makeHtmlTag</code>å¿…éœ€è¿”å›ä¸€ä¸ª decoratorï¼ˆè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨<code>makeHtmlTag</code>ä¸­åŠ å…¥äº†<code>real_decorator()</code>ï¼‰ã€‚</p>\n<p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›å…¥åˆ° decorator çš„é€»è¾‘ä¸­å»äº†â€”â€”decorator å¾—è¿”å›ä¸€ä¸ª wrapperï¼Œwrapper é‡Œå›è°ƒ<code>hello</code>ã€‚çœ‹ä¼¼é‚£ä¸ª<code>makeHtmlTag()</code>å†™å¾—å±‚å±‚å å ï¼Œä½†æ˜¯ï¼Œå·²ç»äº†è§£äº†æœ¬è´¨çš„æˆ‘ä»¬è§‰å¾—å†™å¾—å¾ˆè‡ªç„¶ã€‚</p>\n<p>æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªä¸ºå…¶å®ƒå‡½æ•°åŠ ç¼“å­˜çš„ç¤ºä¾‹:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> functools <span class=\"keyword\">import</span> wraps</span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">memoization</span>(<span class=\"params\">fn</span>):</span><br><span class=\"line\">    cache = &#123;&#125;</span><br><span class=\"line\">    miss = <span class=\"built_in\">object</span>()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">    @wraps(<span class=\"params\">fn</span>)</span></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">wrapper</span>(<span class=\"params\">*args</span>):</span><br><span class=\"line\">        result = cache.get(args, miss)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> result <span class=\"keyword\">is</span> miss:</span><br><span class=\"line\">            result = fn(*args)</span><br><span class=\"line\">            cache[args] = result</span><br><span class=\"line\">        <span class=\"keyword\">return</span> result</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> wrapper</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@memoization</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">fib</span>(<span class=\"params\">n</span>):</span><br><span class=\"line\">    <span class=\"keyword\">if</span> n &lt; <span class=\"number\">2</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> n</span><br><span class=\"line\">    <span class=\"keyword\">return</span> fib(n - <span class=\"number\">1</span>) + fib(n - <span class=\"number\">2</span>)</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ˜¯ä¸€ä¸ªæ–æ³¢é‚£å¥‘æ•°ä¾‹çš„é€’å½’ç®—æ³•ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œè¿™ä¸ªé€’å½’æ˜¯ç›¸å½“æ²¡æœ‰æ•ˆç‡çš„ï¼Œå› ä¸ºä¼šé‡å¤è°ƒç”¨ã€‚æ¯”å¦‚ï¼šæˆ‘ä»¬è¦è®¡ç®— fib(5)ï¼Œäºæ˜¯å…¶åˆ†è§£æˆ<code>fib(4) + fib(3)</code>ï¼Œè€Œ<code>fib(4)</code>åˆ†è§£æˆ<code>fib(3) + fib(2)</code>ï¼Œ<code>fib(3)</code>åˆåˆ†è§£æˆ<code>fib(2) + fib(1)</code>â€¦â€¦ä½ å¯çœ‹åˆ°ï¼ŒåŸºæœ¬ä¸Šæ¥è¯´ï¼Œ<code>fib(3)</code>,<code>fib(2)</code>,<code>fib(1)</code>åœ¨æ•´ä¸ªé€’å½’è¿‡ç¨‹ä¸­è¢«è°ƒç”¨äº†è‡³å°‘ä¸¤æ¬¡ã€‚</p>\n<p>è€Œæˆ‘ä»¬ç”¨ decoratorï¼Œåœ¨è°ƒç”¨å‡½æ•°å‰æŸ¥è¯¢ä¸€ä¸‹ç¼“å­˜ï¼Œå¦‚æœæ²¡æœ‰æ‰è°ƒç”¨ï¼Œæœ‰äº†å°±ä»ç¼“å­˜ä¸­è¿”å›å€¼ã€‚ä¸€ä¸‹å­ï¼Œè¿™ä¸ªé€’å½’ä»äºŒå‰æ ‘å¼çš„é€’å½’æˆäº†çº¿æ€§çš„é€’å½’ã€‚<code>wraps</code>çš„ä½œç”¨æ˜¯ä¿è¯<code>fib</code>çš„å‡½æ•°åä¸è¢«<code>wrapper</code>æ‰€å–ä»£ã€‚</p>\n</blockquote>\n<p>â€‹                                                                                                                                                          å¼•ç”¨è‡ª<a href=\"https://mendylee.gitbooks.io/geeker-study-courses/content/bian-cheng-fan-shi-pian.html\">ç¼–ç¨‹èŒƒå¼ç¯‡</a>ï¼Œ2022å¹´8æœˆ20æ—¥è®°</p>\n<h1 id=\"Google-Colab\"><a href=\"#Google-Colab\" class=\"headerlink\" title=\"Google Colab\"></a>Google Colab</h1><p>æµ‹è¯•ä»£ç ï¼š</p>\n<p><a href=\"https://colab.research.google.com/drive/1GML_i9JVwJKSGYCPL8_Mi2CXixXix6DF?usp=sharing\">https://colab.research.google.com/drive/1GML_i9JVwJKSGYCPL8_Mi2CXixXix6DF?usp=sharing</a></p>\n","tags":["Python"]},{"title":"å¤§å­¦","url":"/2022/07/24/%E5%A4%A7%E5%AD%A6/","content":"<h1 id=\"å¾€äº‹å¦‚é£\"><a href=\"#å¾€äº‹å¦‚é£\" class=\"headerlink\" title=\"å¾€äº‹å¦‚é£\"></a>å¾€äº‹å¦‚é£</h1><p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220724145451484.png\" alt=\"image-20220724145451484\"></p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220724145529969.png\" alt=\"image-20220724145529969\"></p>\n<h1 id=\"å¤§ä¸€\"><a href=\"#å¤§ä¸€\" class=\"headerlink\" title=\"å¤§ä¸€\"></a>å¤§ä¸€</h1><p>æ›¾ç»æƒ³é€€å­¦ï¼Œå°±å·®å»æ•™åŠ¡å¤„ç”³è¯·äº†ã€‚å°è±¡ä¸­éšçº¦è®°å¾—æˆ‘æ˜¯å»äº†çš„ï¼Œå¹¶ä¸”å¥½åƒç¢°åˆ°äº†åŒæ ·æ¥ç”³è¯·é€€å­¦çš„äººï¼Œä½†æ˜¯æˆ‘æœ€ç»ˆä»ç„¶æ”¾å¼ƒäº†é€€å­¦ã€‚ä½†æ˜¯è¿™äº›éšçº¦çš„å°è±¡å·²ç»è¿‡äºæ¨¡ç³Šäº†ï¼Œæˆ‘ç”šè‡³æ— æ³•æ˜ç¡®è¿™äº›å°è±¡æ˜¯ä¸æ˜¯çœŸå®å‘ç”Ÿè¿‡çš„ã€‚</p>\n<p>å¼€å§‹åˆ·Aå²›ã€‚</p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220724150100156.png\" alt=\"image-20220724150100156\"></p>\n<p>æœŸæœ«å»å¤ä¹ </p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220724150321457.png\" alt=\"image-20220724150321457\"></p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220724150359770.png\" alt=\"image-20220724150359770\"></p>\n<p>20190330å¥½åƒæ˜¯å»è¥¿ç”µæ‰“ä»–ä»¬ACMæ ¡èµ›</p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220724151233274.png\" alt=\"image-20220724151233274\"></p>\n<p>é‚£ä¸ªæ—¶å€™å–œæ¬¢å»æ˜è¿œ3åŒºå­¦</p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220724151415333.png\" alt=\"image-20220724151415333\"></p>\n<h1 id=\"å¤§äºŒ\"><a href=\"#å¤§äºŒ\" class=\"headerlink\" title=\"å¤§äºŒ\"></a>å¤§äºŒ</h1><p>å—¯è¹­çš„é“œå¥–</p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220724151637515.png\" alt=\"image-20220724151637515\"></p>\n<p>å¤§ä¸€å—¯å·æ”¶çš„å¥–å­¦é‡‘</p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220724151805136.png\" alt=\"image-20220724151805136\"></p>\n<p>ä¸‹åŠå­¦æœŸå°±ç–«æƒ…äº†ï¼Œåœ¨å®¶å—¯èºº</p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220724152056907.png\" alt=\"image-20220724152056907\"></p>\n<p>è²Œä¼¼é‚£ä¸ªæ—¶å€™æ¥è§¦åˆ°äº†cltvï¼Ÿ</p>\n<p><img src=\"https://md-pic-bed.oss-cn-hongkong.aliyuncs.com/img/image-20220724152147027.png\" alt=\"image-20220724152147027\"></p>\n<h1 id=\"å¤§ä¸‰\"><a href=\"#å¤§ä¸‰\" class=\"headerlink\" title=\"å¤§ä¸‰\"></a>å¤§ä¸‰</h1><p>å¤§ä¸‰å¼€å§‹å¿ƒæ€å°±å¼€å§‹ä¸è¡Œäº†ã€‚ä¸ºäº†å·ä¿ç ”é™„åŠ åˆ†ï¼Œå¯’å‡å‚åŠ çš„ç¾èµ›ï¼Œæ— æœè€Œç»ˆã€‚</p>\n<blockquote>\n<p>ä»Šå¤©æ˜¯2022å¹´4æœˆ9æ—¥ã€‚æƒ³å†™ä¸€ä¸‹æˆ‘ä»å»å¹´å¼€å§‹åˆ°ä»Šå¤©çš„æ€»ç»“ã€‚</p>\n<p>å»å¹´1ã€2æœˆä»½çš„æ—¶å€™çŸ³å®¶åº„ç–«æƒ…æˆ‘æ— æ³•å›å®¶ï¼Œåœ¨é•¿å®‰å¤§å­¦æ ¡æœ¬éƒ¨æš‚ä½äº†ä¸€æ®µæ—¶é—´ï¼Œé‚£ä¸ªæ—¶é—´æ®µæ—¶æˆ‘ç”±äºè€ƒç ¸äº†è®¡ç®—æœºç½‘ç»œå’Œè®¡ç®—æœºç»„æˆï¼Œæ•´ä¸ªäººå¤„äºä¸€ç§éå¸¸ææ…Œçš„çŠ¶æ€ï¼Œæˆ‘æ‹…å¿ƒæˆ‘ä¼šæ‹¿ä¸åˆ°ä¿ç ”åé¢ã€‚é‚£æ—¶æˆ‘å’Œpxcä½ä¸€é—´å¯å®¤ï¼Œä»–å½“æ—¶åœ¨æ‰¾å·¥ä½œï¼Œç”Ÿæ´»éå¸¸è§„å¾‹ï¼Œæ¯å¤©æ—©èµ·å¼€å§‹å¹²æ´»å†™é¡¹ç›®ï¼Œå·¥ä½œä¸€æ•´å¤©ï¼Œæ™šä¸Šå’Œå¥³æœ‹å‹æ‰“ä¸ªç”µè¯ä¹‹åç¡è§‰ã€‚æˆ‘é‚£æ—¶æ•´ä¸ªäººå¤„äºä¸€ç§éå¸¸çŸ›ç›¾çš„çŠ¶æ€ï¼Œä¸€æ–¹é¢å’Œynã€jxhç»„äº†ç¾èµ›é˜Ÿä¼å›¾æ‹¿ä¸ªå¥–ä»¥ä¾¿åè¾¹è¯„ä¿ç ”èµ„æ ¼èƒ½åŠ åˆ†ï¼Œå¦ä¸€æ–¹é¢åˆé€ƒé¿ç°å®æ¯å¤©çœ‹å¼ é¡ºé£ã€æ¨æœˆç­‰äººçš„ç›´æ’­ã€‚</p>\n<p>æˆ‘ä»¬ç¾èµ›é˜Ÿå•¥éƒ½æ²¡æå‡ºæ¥ã€‚</p>\n<p>å¼€å­¦åç–¯ç‹‚å·ç¼–è¯‘åŸç†ã€AIç­‰è¯¾ç¨‹ã€‚è¿™æ—¶èº«è¾¹å¤§éƒ¨åˆ†äººå·²ç»å¼€å§‹å‡†å¤‡è€ƒç ”äº†ã€‚</p>\n<p>ä¹‹åæ˜¯å®ä¹ ï¼Œå­¦æ ¡ä¸çŸ¥é“ä»å“ªæ‰¾æ¥äº†ä¸ªwebå¼€å‘çš„åŸ¹è®­å…¬å¸ç»™æˆ‘ä»¬åŸ¹è®­ã€‚æˆ‘é‚£æ—¶æ‰¾äº†ä¸ªç‰›å®¢å¤§å­¦çš„webæ±‚èŒé¡¹ç›®ï¼ŒæŠŠé‚£ä¸ªé…å¥—è§†é¢‘å®Œæ•´çœ‹äº†ä¸€éã€‚è¿™ä¸ªæ—¶é—´ç‚¹å¤§éƒ¨åˆ†è€ƒç ”äººåœ¨å®ä¹ æ—¶å·²ç»å•¥ä¹Ÿä¸åšäº†åªå­¦è€ƒç ”å†…å®¹äº†ã€‚æˆ‘å°è±¡æœ€æ·±çš„æ˜¯tzråœ¨çœ‹æŸä¸ªç§¯åˆ†æ•™å­¦è§†é¢‘ã€ywfåœ¨æœºæˆ¿æ¡Œå­ä¸Šæ‘†äº†å‡ æœ¬åšåšçš„æ³•å­¦ä¹¦ã€‚</p>\n<p>ä¹‹åæ˜¯æš‘å‡ï¼Œæˆ‘è¿™æ—¶è¿˜åœ¨æƒ³ç€æ¯”èµ›åŠ åˆ†ï¼Œçœ‹äº†çœ‹å¾®ä¿¡å°ç¨‹åºå¼€å‘çš„æ¯”èµ›å’Œä¸­ç§‘é™¢çš„æŸä¸ªé«˜æ€§èƒ½æ¯”èµ›ï¼Œæœ€åä¹Ÿä¸äº†äº†ä¹‹äº†ï¼Œä¸­é—´è¿˜å»äº†ä¸€è¶ŸåŒ»é™¢ã€‚</p>\n<p>æˆ‘ä»¬ä¸Šä¸€å±Šçš„è¿›è¡Œæ¯•ä¸šç­”è¾©çš„æ—¶å€™ï¼Œæˆ‘å’Œä»¥å‰çš„é˜Ÿå‹dypæœ‰è¿‡ä¸€æ¬¡çŸ­æš‚çš„äº¤æµï¼Œå…³äºå¦‚æœæˆ‘è¢«é™åˆ¶ä¿æœ¬æ ¡æ€ä¹ˆåŠçš„è¯é¢˜ã€‚</p>\n<p>æš‘æœŸæœŸé—´æˆ‘å‚åŠ äº†è®¸å¤šå­¦æ ¡çš„å¤ä»¤è¥ï¼Œæœ‰çš„è¢«è€å¸ˆå–·çš„æƒ¨ä¸å¿ç¹ï¼Œä¸è¿‡è¿™æ®µå†ç¨‹æŸç§æ„ä¹‰ä¸Šç¡®å®ä½¿å¾—æˆ‘è„¸çš®å˜åšäº†ã€‚</p>\n<p>9æœˆä»½å¼€å­¦ã€‚</p>\n</blockquote>\n<h1 id=\"å¤§å››\"><a href=\"#å¤§å››\" class=\"headerlink\" title=\"å¤§å››\"></a>å¤§å››</h1><p>å¼€å­¦å°±æ˜¯å¤§å››ï¼Œæˆ‘ä»¬è¿™ä¸€å±Šä¿®æ”¹äº†ä¿ç ”è§„åˆ™ä¸”æ˜¯åœ¨å¤§å››å¼€å­¦åæ‰å…¬å¸ƒçš„æ–‡ä»¶ï¼Œæˆ‘è®°å¾—å¤§æ¦‚æ˜¯9æœˆ12å·å·¦å³ã€‚é¬¼ä½¿ç¥å·®åœ°æ”¾å¼ƒäº†ä¿å†…ï¼Œè€ƒç ”å»äº†ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸å¯è°“ä¸ç—›è‹¦ã€‚</p>\n<p>ä½†æ˜¯ç»“æœæ˜¯å¥½çš„ï¼Œè€ƒä¸Šäº†ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œæˆ‘ç›®å‰è®¤ä¸ºæˆ‘çš„è¿™ä¸€æ¬¡æˆåŠŸå…·æœ‰è¿æ°”æˆåˆ†ã€‚</p>\n<p>å¤è¯•é€šè¿‡äº†ä¹‹åå¼€å§‹è®¤çœŸææ¯•è®¾ï¼Œç¬¬ä¸€æ¬¡æ¥è§¦åˆ°STM32å’ŒPYNQï¼ŒæŒ‡å¯¼è€å¸ˆç»™çš„åŸå§‹å·¥ç¨‹çš„å®Œæˆåº¦ä¸é«˜ä¸”æ²¡äººæŒ‡å¯¼æˆ‘æ€ä¹ˆç”¨ï¼Œåšçš„è¿‡ç¨‹ä¸­ä¸€åº¦è®¤ä¸ºåšä¸å‡ºæ¥äº†è¦æ¢é¢˜ï¼Œä¸è¿‡åæ¥è¿˜æ˜¯æˆåŠŸæå‡ºæ¥äº†ï¼ˆæ„Ÿè§‰ç¨‹åºåˆ°å¤„éƒ½ä¸ä¸¥è°¨ï¼Œä¸è¿‡èƒ½è·‘å°±è¡Œï¼Œnobody caresï¼‰ã€‚è¿™æ¬¡ç»å†ä¹ŸæŒºæŠ˜ç£¨çš„ï¼Œä½†æ˜¯å¯èƒ½ç¡®å®è®­ç»ƒäº†æŠ—å‹èƒ½åŠ›ã€‚</p>\n<h1 id=\"å¼€èºº\"><a href=\"#å¼€èºº\" class=\"headerlink\" title=\"å¼€èºº\"></a>å¼€èºº</h1><p>æå®Œæ¯•è®¾å°±å¼€èººäº†ï¼Œå¤§æ¦‚æ˜¯ä»5æœˆä»½ä¸­æ—¬å¼€å§‹çš„ã€‚ç”±äºæˆ‘æ€»æ„Ÿè§‰è‡ªå·±æˆåŠŸè€ƒä¸Šç ”ç©¶ç”Ÿæœ‰è¿æ°”æˆåˆ†ä»¥åŠä¸€äº›äº‹æƒ…ï¼Œå¯¼è‡´æˆ‘æ€»æœ‰ä¸€ç§é€ƒé¿æœªæ¥çš„å¿ƒæ€ã€‚åè¾¹å°±æ²¡å¹²ä»€ä¹ˆæ­£ç»äº‹æƒ…äº†ï¼ŒPRAçš„æ¯”èµ›æ²¡å‚åŠ ï¼ŒæŠ˜è…¾äº†ä¸€æ®µæ—¶é—´çš„esxiå’Œè½¯è·¯ç”±ã€ipv6ã€‚</p>\n","tags":["ç”Ÿæ´»"]}]